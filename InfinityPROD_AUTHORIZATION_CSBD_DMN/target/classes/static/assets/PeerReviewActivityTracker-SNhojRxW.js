import{c as g,j as e,r as t,R as v,P as _,C as I,G as U,a as K,B as q,X as H,Y as X,T as V,b as Y}from"./index-CCDANUdf.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],W=g("circle-check-big",Q);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Z=g("circle-x",J);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],se=g("message-square",ee);function a({children:n,className:l="",...h}){return e.jsx("button",{className:"px-4 py-2 rounded bg-blue-600 text-white font-medium shadow hover:bg-blue-700 transition "+l,...h,children:n})}function d({children:n,className:l=""}){return e.jsx("div",{className:"bg-white rounded-lg shadow-sm "+l,children:n})}function o({children:n,className:l=""}){return e.jsx("div",{className:"p-4 border-b "+l,children:n})}function m({children:n,className:l=""}){return e.jsx("h2",{className:"text-lg font-semibold "+l,children:n})}function x({children:n,className:l=""}){return e.jsx("div",{className:"p-4 "+l,children:n})}const ie=[{id:"r1",name:"Authorization_CSBD_DMN"},{id:"r2",name:"Authorization_GBD_DMN"},{id:"r3",name:"Deny"}],M=[{id:"r1",status:"SUCCESS",startTime:Date.now()-1e3*60*60,endTime:Date.now()-1e3*60*30,pipelineName:"Authorization_CSBD_DMN",needsReview:!1,reviewStatus:"approved",reviewer:"alice@company.com"},{id:"r2",status:"FAILED",startTime:Date.now()-1e3*60*120,endTime:Date.now()-1e3*60*110,pipelineName:"Authorization_GBD_DMN",needsReview:!1,reviewStatus:null,reviewer:null},{id:"r3",status:"STARTED",startTime:Date.now()-1e3*60*5,endTime:null,pipelineName:"Deny",needsReview:!0,reviewStatus:null,reviewer:null}],te=[{name:"daily",cronSchedule:"0 0 * * *",pipelineName:"Authorization_CSBD_DMN",isStopped:!1},{name:"weekly",cronSchedule:"0 0 * * 0",pipelineName:"Authorization_GBD_DMN",isStopped:!0},{name:"monthly",cronSchedule:"0 0 1 * *",pipelineName:"Deny",isStopped:!1},{name:"hourly",cronSchedule:"0 * * * *",pipelineName:"Authorization_CSBD_DMN",isStopped:!1}];function re(){const[n,l]=t.useState(ie),[h,E]=t.useState(M),[f,ae]=t.useState(te),[ne,F]=t.useState(null),[w,p]=t.useState(null),[u,b]=t.useState(""),[y,S]=t.useState(""),[j,R]=t.useState({}),[C,L]=t.useState(M.filter(s=>s.needsReview&&!s.reviewStatus)),[D,B]=t.useState([]);t.useRef(!0);const[k,$]=t.useState(null),A=h.filter(s=>{const i=u?s.status===u:!0,r=(y||"").trim().toLowerCase(),N=!r||s.id&&s.id.toLowerCase().includes(r)||s.pipelineName&&s.pipelineName.toLowerCase().includes(r);return i&&N}),O=A.map(s=>({name:s.pipelineName,duration:s.endTime?Math.max(0,(s.endTime-s.startTime)/1e3):(Date.now()-s.startTime)/1e3}));function T(s){const i="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium";return s==="SUCCESS"?e.jsx("span",{className:`${i} bg-green-100 text-green-800`,children:"Success"}):s==="FAILED"?e.jsx("span",{className:`${i} bg-red-100 text-red-800`,children:"Failed"}):s==="STARTED"||s==="STARTING"?e.jsx("span",{className:`${i} bg-yellow-100 text-yellow-800`,children:"Running"}):e.jsx("span",{className:`${i} bg-gray-100 text-gray-800`,children:s})}function P(s){if(!s.needsReview)return null;const i="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ml-2";return s.reviewStatus==="approved"?e.jsx("span",{className:`${i} bg-green-100 text-green-800`,children:"✓ Approved"}):s.reviewStatus==="denied"?e.jsx("span",{className:`${i} bg-red-100 text-red-800`,children:"✗ Denied"}):e.jsx("span",{className:`${i} bg-blue-100 text-blue-800`,children:"Pending Review"})}function z(s,i,r=""){const N=h.map(c=>c.id===s?{...c,reviewStatus:i,reviewer:"current-user@company.com",reviewFeedback:r,reviewedAt:Date.now()}:c);E(N),L(c=>c.filter(G=>G.id!==s)),R(c=>({...c,[s]:""})),$(`Run ${s} ${i} successfully`)}return e.jsxs("div",{className:"p-6 min-h-screen bg-slate-50",children:[e.jsxs("header",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Peer Review Activity Tracker"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Overview of pipelines, runs, schedules, reviews and logs"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(a,{className:"flex items-center gap-2",onClick:()=>window.location.reload(),children:[e.jsx(v,{size:16,className:"mr-1"})," ",e.jsx("span",{children:"Refresh"})]})})]}),e.jsxs("main",{className:"grid grid-cols-12 gap-6",children:[e.jsxs("section",{className:"col-span-3",children:[e.jsxs(d,{children:[e.jsx(o,{children:e.jsx(m,{children:"Repositories"})}),e.jsx(x,{children:e.jsx("div",{className:"space-y-3",children:n.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md hover:bg-slate-100",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:["id: ",s.id]})]}),e.jsxs("div",{className:"flex flex-row gap-2 min-w-[80px]",children:[e.jsxs(a,{size:"sm",className:"w-full flex items-center justify-center gap-2",onClick:()=>{F(s),p(null)},children:[e.jsx(_,{size:14,className:"mr-1"})," ",e.jsx("span",{children:"Select"})]}),e.jsxs(a,{size:"sm",className:"w-full flex items-center justify-center gap-2",onClick:()=>{},children:[e.jsx(_,{size:14,className:"mr-1"})," ",e.jsx("span",{children:"Run"})]})]})]},s.id))})})]}),e.jsxs(d,{className:"mt-4",children:[e.jsx(o,{children:e.jsx(m,{children:"Schedules"})}),e.jsx(x,{children:e.jsxs("div",{className:"space-y-2",children:[f.length===0&&e.jsx("div",{className:"text-xs text-gray-500",children:"No schedules found."}),f.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[s.pipelineName," • ",s.cronSchedule||"—"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm",children:s.isStopped?"Paused":"Active"}),e.jsx("input",{type:"checkbox",checked:!s.isStopped,onChange:i=>{}})]})]},s.name))]})})]})]}),e.jsxs("section",{className:"col-span-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsxs("select",{value:u,onChange:s=>b(s.target.value),className:"p-2 border rounded",children:[e.jsx("option",{value:"",children:"All statuses"}),e.jsx("option",{value:"SUCCESS",children:"Success"}),e.jsx("option",{value:"FAILED",children:"Failed"}),e.jsx("option",{value:"STARTED",children:"Running"})]}),e.jsx("input",{className:"p-2 border rounded flex-1",placeholder:"Filter by run id or pipeline",value:y,onChange:s=>S(s.target.value)}),e.jsx(a,{onClick:()=>{b(""),S("")},children:"Clear"})]}),e.jsxs(d,{children:[e.jsx(o,{children:e.jsx(m,{children:"Recent Runs"})}),e.jsx(x,{children:e.jsx("div",{className:"overflow-auto max-h-96",children:e.jsxs("table",{className:"w-full table-auto text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left border-b",children:[e.jsx("th",{className:"p-2",children:"Model"}),e.jsx("th",{className:"p-2",children:"Status"}),e.jsx("th",{className:"p-2",children:"Started"}),e.jsx("th",{className:"p-2",children:"Duration"}),e.jsx("th",{className:"p-2",children:"Actions"})]})}),e.jsx("tbody",{children:A.map(s=>e.jsxs("tr",{className:"border-b hover:bg-slate-50",children:[e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex items-center",children:[s.pipelineName,P(s)]})}),e.jsx("td",{className:"p-2",children:T(s.status)}),e.jsx("td",{className:"p-2",children:s.startTime?new Date(s.startTime).toLocaleString():"-"}),e.jsx("td",{className:"p-2",children:s.endTime?`${Math.round((s.endTime-s.startTime)/1e3)}s`:"—"}),e.jsxs("td",{className:"p-2 flex gap-2",children:[e.jsxs(a,{size:"sm",className:"flex items-center gap-2",onClick:()=>{p(s)},children:[e.jsx(I,{size:14,className:"mr-1"})," ",e.jsx("span",{children:"Logs"})]}),e.jsxs(a,{size:"sm",className:"flex items-center gap-2",onClick:()=>alert(`Open run ${s.id} in Dagit (if configured)`),children:[e.jsx(U,{size:14,className:"mr-1"})," ",e.jsx("span",{children:"Open"})]}),s.status==="FAILED"&&e.jsxs(a,{size:"sm",className:"flex items-center gap-2",onClick:()=>{},children:[e.jsx(v,{size:14,className:"mr-1"})," ",e.jsx("span",{children:"Retry"})]})]})]},s.id))})]})})})]}),e.jsx("div",{className:"mt-4 grid grid-cols-2 gap-4",children:e.jsxs(d,{className:"col-span-2",children:[e.jsx(o,{children:e.jsx(m,{children:"Run Durations (seconds)"})}),e.jsx(x,{style:{height:240},children:e.jsx(K,{width:"100%",height:200,children:e.jsxs(q,{data:O,children:[e.jsx(H,{dataKey:"name"}),e.jsx(X,{}),e.jsx(V,{}),e.jsx(Y,{dataKey:"duration"})]})})})]})})]}),e.jsxs("section",{className:"col-span-3",children:[e.jsxs(d,{children:[e.jsx(o,{children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(se,{size:20})," Peer Reviews"]})}),e.jsxs(x,{children:[e.jsx("div",{className:"space-y-4",children:C.length===0?e.jsx("div",{className:"text-sm text-gray-500 text-center py-4",children:"No pending reviews"}):C.map(s=>e.jsxs("div",{className:"border rounded-lg p-3 bg-blue-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:s.pipelineName}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Run ID: ",s.id]})]}),e.jsx("div",{className:"text-xs text-blue-600",children:T(s.status)})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Review Feedback"}),e.jsx("textarea",{placeholder:"Add your review comments...",className:"w-full p-2 text-xs border rounded resize-none",rows:3,value:j[s.id]||"",onChange:i=>R(r=>({...r,[s.id]:i.target.value}))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(a,{size:"sm",className:"flex-1 bg-green-600 hover:bg-green-700 text-white flex items-center justify-center gap-2",onClick:()=>z(s.id,"approved",j[s.id]),children:[e.jsx(W,{size:14,className:"mr-1"})," ",e.jsx("span",{children:"Approve"})]}),e.jsxs(a,{size:"sm",className:"flex-1 bg-red-600 hover:bg-red-700 text-white flex items-center justify-center gap-2",onClick:()=>z(s.id,"denied",j[s.id]),children:[e.jsx(Z,{size:14,className:"mr-1"})," ",e.jsx("span",{children:"Deny"})]})]})]},s.id))}),e.jsxs("div",{className:"mt-6 pt-4 border-t",children:[e.jsx("div",{className:"text-sm font-medium mb-3",children:"Recent Reviews"}),e.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[h.filter(s=>s.reviewStatus).slice(0,5).map(s=>e.jsxs("div",{className:"p-2 border rounded text-xs",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"font-medium",children:s.pipelineName}),e.jsx("span",{className:s.reviewStatus==="approved"?"text-green-600":"text-red-600",children:s.reviewStatus==="approved"?"✓Approved":"✗ Denied"})]}),e.jsxs("div",{className:"text-gray-500",children:["by ",s.reviewer," • ",s.reviewedAt?new Date(s.reviewedAt).toLocaleDateString():"Unknown"]}),s.reviewFeedback&&e.jsxs("div",{className:"mt-1 p-1 bg-gray-50 rounded text-gray-700",children:['"',s.reviewFeedback,'"']})]},s.id)),e.jsxs("div",{className:"p-2 border rounded text-xs bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"font-medium",children:"Authorization_GBD_DMN"}),e.jsx("span",{className:"text-green-600",children:"✓Approved"})]}),e.jsx("div",{className:"text-gray-500",children:"by jane.smith@company.com • 9/28/2025"}),e.jsx("div",{className:"mt-1 p-1 bg-gray-50 rounded text-gray-700",children:'"Reviewed and approved for deployment."'})]})]})]})]})]}),e.jsxs(d,{className:"mt-4",children:[e.jsx(o,{children:e.jsx(m,{children:"Quick Actions"})}),e.jsx(x,{children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(a,{onClick:()=>{alert("Open sensors view (not implemented in mock)")},children:"View Sensors"}),e.jsx(a,{onClick:()=>{alert("Open workspace")},children:"Open Workspace"})]})})]}),k&&e.jsxs("div",{className:"mt-4 p-3 bg-red-50 text-red-700 rounded-md shadow",children:["Error: ",String(k)]})]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6 mt-8",children:e.jsxs(d,{children:[e.jsx(o,{children:e.jsx(m,{children:"Live Logs"})}),e.jsxs(x,{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"text-sm",children:"Selected run:"}),e.jsx("div",{className:"font-medium",children:w?w.id:"—"}),e.jsxs(a,{className:"flex items-center gap-2",onClick:()=>{p(null),B([])},children:[e.jsx(v,{size:14,className:"mr-1"})," ",e.jsx("span",{children:"Clear"})]})]}),e.jsxs("div",{id:"run-logs-scroll-2",style:{maxHeight:320,overflow:"auto",background:"#0f172a",color:"#e6eef8",padding:8,borderRadius:6},children:[D.length===0&&e.jsx("div",{className:"text-xs text-gray-400",children:"No logs yet."}),D.map((s,i)=>e.jsxs("div",{style:{fontFamily:"monospace",fontSize:12,marginBottom:6},children:["[",s.level||"INFO","] ",s.timestamp?new Date(s.timestamp).toLocaleTimeString():""," — ",s.text]},i))]})]})]})}),e.jsx("footer",{className:"mt-8 text-xs text-gray-500",children:"Peer review dashboard — mock data only."})]})}export{re as default};
//# sourceMappingURL=PeerReviewActivityTracker-SNhojRxW.js.map
